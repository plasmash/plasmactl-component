runtime: plugin
action:
  title: Depend
  description: Manage component dependencies
  arguments:
    - name: target
      title: Target
      description: Target component (path or MRN)
      required: true
    - name: operations
      title: Operations
      description: "Dependency operations: DEP (add), DEP- (remove), OLD/NEW (replace)"
      type: array
      required: false
  options:
    - name: source
      shorthand: s
      title: Source
      description: Components source directory (for show mode)
      type: string
      default: ".plasma/model/compose/merged/src"
    - name: path
      shorthand: p
      title: Path
      description: Show paths instead of MRNs
      type: boolean
      default: false
    - name: tree
      shorthand: t
      title: Tree
      description: Show dependencies in tree-like output
      type: boolean
      default: false
    - name: reverse
      shorthand: r
      title: Reverse
      description: Show reverse dependencies (what depends on target)
      type: boolean
      default: false
    - name: depth
      shorthand: d
      title: Depth
      description: Dependency levels to show (1=direct, 99=all)
      type: integer
      default: 1
    - name: build
      shorthand: b
      title: Build
      description: Include build dependencies (from main.yaml, i.e., helpers/builders)
      type: boolean
      default: false
  result:
    type: object
    properties:
      target:
        type: string
      mode:
        type: string
      requires:
        type: array
        items:
          type: string
      required_by:
        type: array
        items:
          type: string
      operations:
        type: array
        items:
          type: object
          properties:
            type:
              type: string
            dep:
              type: string
            new_dep:
              type: string
            applied:
              type: boolean
